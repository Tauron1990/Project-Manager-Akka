@page "/FileManager"

@inherits NonAutoRenderingView<SimpleProjectManager.Client.Shared.ViewModels.Pages.FileManagerViewModel>

@inject IDialogService DialogService

<PageTitle>Datei Manager</PageTitle>

@if (ViewModel?.Error is not null)
{
    <ExceptionDisplay Error="ViewModel.Error"/>
}
else if (ViewModel != null)
{
    <MudTable Items="ViewModel.Files" LoadingProgressColor="Color.Info" Loading="ViewModel.IsLoading" GroupBy="_groupDefinition">
        <HeaderContent>
            <MudTh>Aktionen</MudTh>
            <MudTh>Datei Name</MudTh>
            <MudTh>Datei Größe</MudTh>
            <MudTh>Job Name</MudTh>
        </HeaderContent>
        <RowTemplate>
            <MudTd DataLabel="Aktionen">
                <MudButton OnClick="@(() => _deleteFile?.Invoke(context))">Löschen</MudButton>
            </MudTd>
            <MudTd DataLabel="Datei Name">@context.Name</MudTd>
            <MudTd DataLabel="Datei Größe">@((context.Size.Value / 1024d / 1024d).ToString("F"))</MudTd>
            <MudTd DataLabel="Job Name">@context.JobName.Value</MudTd>
        </RowTemplate>
    </MudTable>
}
else
{
    <CenterElement>
        <MudText>Fehler beim Initialisieren</MudText>
    </CenterElement>
}