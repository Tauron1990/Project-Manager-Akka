@page "/"
@using SimpleProjectManager.Client.Shared.ViewModels
@inherits NonAutoRenderingView<SimpleProjectManager.Client.Shared.ViewModels.Pages.DashboardViewModel>

@inject PageNavigation PageNavigation

<PageTitle>Start Seite</PageTitle>


<MudGrid Class="ma-5">
    <MudItem lg="3">
        <MudPaper Elevation="2" @onclick="PageNavigation.ShowCurrentJobs">
            <MudGrid Spacing="1">
                <MudItem lg="12">
                    <MudText Align="Align.Center">Aufträge</MudText>
                </MudItem>
                <MudItem lg="12">
                    <ObservableRenderer Observable="ViewModel?.JobCountState">
                        <ValueRenderer>
                            <MudText Align="Align.Center">@context.Value</MudText>
                        </ValueRenderer>
                        <OnCompled>
                            <GenericStreamError/>
                        </OnCompled>
                    </ObservableRenderer>
                </MudItem>
                <MudItem lg="4"/>
                <MudItem lg="4">
                    <MudCommandButton @ref="StartJob">Job Starten</MudCommandButton>
                </MudItem>
                <MudItem lg="4"/>
            </MudGrid>
        </MudPaper>
    </MudItem>
    <MudItem lg="3">
        <MudPaper>
            <MudGrid Spacing="2">
                <MudGrid Justify="Justify.Center">
                    <MudItem lg="12">
                        <MudButton FullWidth="@true" StartIcon="@Icons.Material.Filled.NewLabel" OnClick="@(() => PageNavigation.NewJob())">Neuer Job</MudButton>
                    </MudItem>
                    <MudItem lg="12">
                        <MudButton FullWidth="@true" OnClick="@(() => PageNavigation.UploadFiles())">Daten Hochladen</MudButton>
                    </MudItem>
                </MudGrid>
            </MudGrid>
        </MudPaper>
    </MudItem>
</MudGrid>