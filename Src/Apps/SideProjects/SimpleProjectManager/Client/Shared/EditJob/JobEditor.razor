@inherits NonAutoRenderingView<JobEditorViewModel>

@if (ViewModel is not null)
{
    <MudTabs Elevation="2" Rounded="true" ApplyEffectsToContainer="true" PanelClass="pa-6">
        <MudTabPanel Text="Job information">
            <MudCard>

                @if (!string.IsNullOrWhiteSpace(Title))
                {
                    <MudCardHeader>
                        <MudText Typo="Typo.h2">@Title</MudText>
                    </MudCardHeader>
                }
                <MudCardContent>
                    <MudForm IsValid="ViewModel.IsValid" IsValidChanged="ViewModel.IsValidChanged">
                        <MudTextField @bind-Value="ViewModel.Data.JobName" Label="Job Name" Validation="ViewModel.Data.ValidateJobName" DebounceInterval="100"/>
                        <MudDatePicker @bind-Date="ViewModel.Data.Deadline" Label="Termin" Validation="ViewModel.Data.ValidateDeadline"/>
                        @if (StatusEditing)
                        {
                            <MudSelect @bind-Value="@ViewModel.Data.Status">
                                @foreach (var stat in Enum.GetValues<ProjectStatus>())
                                {
                                    <MudSelectItem Value="stat">@JobTranslator.GetString(stat)</MudSelectItem>
                                }
                            </MudSelect>
                        }
                        @if (SortOrderEditing)
                        {
                            <MudTextField @bind-Value="ViewModel.Data.Ordering" Label="Sortier Position"/>
                        }
                    </MudForm>
                </MudCardContent>
                <MudCardActions>
                    <MudCommandButton StartIcon="@Icons.Filled.Save" @ref="CommitButton">Speichern</MudCommandButton>
                    <MudButton Disabled="@(!CanCancel)" StartIcon="@Icons.Filled.Cancel" OnClick="Cancel">Abbrechen</MudButton>
                </MudCardActions>
            </MudCard>
        </MudTabPanel>
        <MudTabPanel Text="Bild Dateien">
            <FileUploader DisableNameEdit="true" @ref="Uploader"/>
        </MudTabPanel>
    </MudTabs>
}
else
{
    <MudText>Fehler bei der Initialisierung</MudText>
}