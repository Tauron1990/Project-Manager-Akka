@inherits NonAutoRenderingView<JobEditorViewModel>

<MudCard>
    @if (ViewModel is not null)
    {
        @if (!string.IsNullOrWhiteSpace(Title))
        {
            <MudCardHeader>
                <MudText Typo="Typo.h2">@Title</MudText>
            </MudCardHeader>
        }
        <MudCardContent>
            <MudForm IsValid="ViewModel.IsValid" IsValidChanged="ViewModel.IsValidChanged">
                <MudTextField @bind-Value="ViewModel.Data.JobName" Label="Job Name" Validation="ViewModel.Data.ValidateJobName" DebounceInterval="100"/>
                <MudDatePicker @bind-Date="ViewModel.Data.Deadline" Label="Termin" Validation="ViewModel.Data.ValidateDeadline"/>
                @if (StatusEditing)
                {
                    <MudSelect @bind-Value="@ViewModel.Data.Status">
                        @foreach (var stat in Enum.GetValues<ProjectStatus>())
                        {
                            <MudSelectItem Value="stat">@JobTranslator.GetString(stat)</MudSelectItem>
                        }
                    </MudSelect>
                }
                @if (SortOrderEditing)
                {
                    <MudTextField @bind-Value="ViewModel.Data.Ordering" Label="Sortier Position"/>
                }
            </MudForm>
        </MudCardContent>
        <MudCardActions>
            <MudCommandButton StartIcon="@Icons.Filled.Save" @ref="CommitButton">Speichern</MudCommandButton>
            <MudButton Disabled="@(!CanCancel)" StartIcon="@Icons.Filled.Cancel" OnClick="Cancel">Abbrechen</MudButton>
        </MudCardActions>
    }
    else
    {
        <MudText>Fehler bei der Initialisierung</MudText>
    }
</MudCard>
