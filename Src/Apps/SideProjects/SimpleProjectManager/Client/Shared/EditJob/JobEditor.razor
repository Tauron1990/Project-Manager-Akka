@inherits NonAutoRenderingView<JobEditorModel>


<MudCard>
    @if (_model == null)
    {
        <MudText>Fehler bei der Initialisirung</MudText>
    }
    else
    {
        @if (!string.IsNullOrWhiteSpace(Title))
        {
            <MudCardHeader>
                <MudText Typo="Typo.h2">@Title</MudText>
            </MudCardHeader>
        }
        <MudCardContent>
            <MudForm @bind-IsValid="_isValid">
                <MudTextField @bind-Value="_model.JobName" Label="Job Name" Validation="_model.ValidateJobName" DebounceInterval="100"/>
                <MudDatePicker @bind-Date="_model.Deadline" Label="Termin" Validation="_model.ValidateDeadline"/>
                @if (StatusEditing)
                {
                    <MudSelect @bind-Value="@_model.Status">
                        @foreach (var stat in Enum.GetValues<ProjectStatus>())
                        {
                            <MudSelectItem Value="stat">@JobTranslator.GetString(stat)</MudSelectItem>
                        }
                    </MudSelect>
                }
                @if (SortOrderEditing)
                {
                    <MudTextField @bind-Value="_model.Ordering" Label="Sortier Position"/>
                }
            </MudForm>
        </MudCardContent>
        <MudCardActions>
            <MudButton Disabled="@(!_isValid)" StartIcon="@Icons.Filled.Save" OnClick="CommitChanges">Speichern</MudButton>
            <MudButton Disabled="@(!CanCancel)" StartIcon="@Icons.Filled.Cancel" OnClick="Cancel">Abbrechen</MudButton>
        </MudCardActions>
    }
</MudCard>
