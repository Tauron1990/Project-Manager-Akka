@using ServiceManager.Shared.ServiceDeamon
@inherits ComputedStateComponent<bool>

@inject IDatabaseConfig _database;

<MudDivider Class="mb-4"></MudDivider>
<MudNavMenu>
    <MudNavLink Href="" Match="NavLinkMatch.All" Class="ma-1">Übersicht</MudNavLink>
    <MudBadge Icon="@(State.ValueOrDefault ? null : Icons.Material.Outlined.Warning)" Overlap="true" Class="ma-1">
        <MudNavLink Href="/AppConfiguration">Konfiguration</MudNavLink>
    </MudBadge>
</MudNavMenu>

@code {

    private bool _collapseNavMenu = true;

    private string? NavMenuCssClass => _collapseNavMenu ? "collapse" : null;

    private void ToggleNavMenu()
    {
        _collapseNavMenu = !_collapseNavMenu;
    }

    protected override Task<bool> ComputeState(CancellationToken cancellationToken) => _database.GetIsReady();

}
