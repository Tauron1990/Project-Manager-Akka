@using ServiceManager.Shared.ServiceDeamon
@using Tauron

@page "/AppConfiguration"

@inherits PropertyChangedComponent

@inject IServerConfigurationApi _api
@inject AppConfigurationViewModel _viewModel

<Title Value="App Konfiguration"></Title>

<OperationHost>
    <div class="d-flex justify-center">
        <MudPaper Class="d-flex ma-3 py-3 pr-6">
            <MudCheckBox Class="d-flex d-inline-flex ma-1" T="Boolean" Checked="_viewModel.MonitorChanges" CheckedChanged="_viewModel.SetMonitorChanges">Änderungen Übserwachen</MudCheckBox>
            <MudCheckBox Class="d-flex d-inline-flex ma-1" T="Boolean" Checked="_viewModel.RestartServices" CheckedChanged="_viewModel.SetRestartServices">Services Neustarten</MudCheckBox>
        </MudPaper>
    </div>
    <MudTabs Elevation="2" Rounded="true" ApplyEffectsToContainer="true" PanelClass="pa-6">
        <MudTabPanel Text="Datenbank">
            <ConfigurationViewDatabase/>
        </MudTabPanel>
        <MudTabPanel Text="Global">
            <DatabaseRequiredComponent>
                <DatabaseContent>
                    <ConfigurationViewGlobalConfig/>
                </DatabaseContent>
            </DatabaseRequiredComponent>
        </MudTabPanel>
    </MudTabs>
</OperationHost>

@code {
    protected override async Task OnInitializedAsync()
    {
        _viewModel.DisposeWith(this);
        await Track(_api);
        await Track(_viewModel);
        await base.OnInitializedAsync();
    }

}
